{% extends "users/db_base.html" %}
{% load static %}
{% block title %}<title>SnapFlow : Event Create</title>{% endblock %}





{% block sidebar %}

<li class="menu-item ">
   <a href="{% url 'users:dashboard' %}" class="menu-link">
      <i class="menu-icon tf-icons bx bx-home-circle"></i>
      <div data-i18n="Analytics">Dashboard</div>
   </a>
</li>
<li class="menu-header small text-uppercase">
   <span class="menu-header-text">Account</span>
</li>
<li class="menu-item">
   <a href="{% url 'users:profile' %}" class="menu-link">
      <i class="menu-icon tf-icons bx bx-dock-top"></i>
      <div>View Profile</div>
   </a>
</li>
<li class="menu-item">
   <a href="{% url 'notifications:list' %}" class="menu-link">
      <i class="bx bx-bell me-1"></i>
      <div>Notifications</div>
   </a>
</li>
<li class="menu-item">
   <a href="{% url 'users:connections' %}" class="menu-link">
      <i class="bx bx-link-alt me-1"></i>
      <div>Connections</div>
   </a>
</li>
{% if user.role != 'ORGANIZER' %}
<li class="menu-item">
   <a href="{% url 'photos:user_gallery' %}" class="menu-link">
      <i class="menu-icon tf-icons bx bx-photo-album"></i>
      <div>My Photos</div>
   </a>
</li>
{% endif %}
{% if user.role == 'ORGANIZER' %}
<li class="menu-header small text-uppercase">
   <span class="menu-header-text">Event Handle</span>
</li>
{% else %}
<li class="menu-header small text-uppercase">
   <span class="menu-header-text">Events</span>
</li>
{% endif %}
{% if user.role == 'ORGANIZER' %}
<li class="menu-item active">
   <a href="{% url 'events:event_create' %}" class="menu-link">
      <i class="menu-icon tf-icons bx bx-calendar-event"></i>
      <div>Create Event</div>
   </a>
</li>
{% else %}
<li class="menu-item">
   <a href="{% url 'events:request_access_form' %}" class="menu-link">
      <i class="menu-icon tf-icons bx bx-photo-album"></i>
      <div>Join Events</div>
   </a>
</li>
{% endif %}
<li class="menu-item">
   <a href="{% url 'events:event_list' %}" class="menu-link">
      <i class="menu-icon tf-icons bx bx-cog"></i>
      <div>View Events</div>
   </a>
</li>

<li class="menu-item">
  <a href="{% url 'events:access_requests' %}" class="menu-link">
     <i class="menu-icon tf-icons bx bx-list-check"></i>
     <div>Event Requests</div>
  </a>
</li>

<li class="menu-item">
 <a href="{% url 'privacy:organizer_requests' %} " class="menu-link">
   <i class="menu-icon tf-icons bx bx-dock-top"></i>
   <div>Privacy Requests</div>
 </a>
</li>


{% endblock sidebar %}




{% block content %}


<div class="container-xxl flex-grow-1 container-p-y">
    <h4 class="fw-bold py-3 mb-4"><span class="text-muted fw-light">Events /</span> Create New Event</h4>
  
    <div class="row">
      <div class="col-12">
        <div class="card mb-4">
          <h5 class="card-header">Event Details</h5>
          <div class="card-body">
            <form method="post" enctype="multipart/form-data">
              {% csrf_token %}
              
              <div class="row mb-4">
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="{{ form.title.id_for_label }}" class="form-label">{{ form.title.label }}</label>
                    {% if form.title.errors %}
                      <div class="text-danger">{{ form.title.errors }}</div>
                    {% endif %}
                    <input type="text" name="{{ form.title.html_name }}" 
                           id="{{ form.title.id_for_label }}" 
                           class="form-control" 
                           value="{{ form.title.value|default:'' }}"
                           placeholder="Enter event title">
                    {% if form.title.help_text %}
                      <div class="form-text">{{ form.title.help_text }}</div>
                    {% endif %}
                  </div>
                </div>
                
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="{{ form.event_type.id_for_label }}" class="form-label">{{ form.event_type.label }}</label>
                    {% if form.event_type.errors %}
                      <div class="text-danger">{{ form.event_type.errors }}</div>
                    {% endif %}
                    <select name="{{ form.event_type.html_name }}" 
                            id="{{ form.event_type.id_for_label }}" 
                            class="form-select">
                      {% for choice in form.event_type.field.choices %}
                        <option value="{{ choice.0 }}" {% if form.event_type.value == choice.0 %}selected{% endif %}>
                          {{ choice.1 }}
                        </option>
                      {% endfor %}
                    </select>
                    {% if form.event_type.help_text %}
                      <div class="form-text">{{ form.event_type.help_text }}</div>
                    {% endif %}
                  </div>
                </div>
              </div>
              
              <div class="mb-4">
                <label for="{{ form.description.id_for_label }}" class="form-label">{{ form.description.label }}</label>
                {% if form.description.errors %}
                  <div class="text-danger">{{ form.description.errors }}</div>
                {% endif %}
                <textarea name="{{ form.description.html_name }}" 
                          id="{{ form.description.id_for_label }}" 
                          class="form-control" 
                          rows="4">{{ form.description.value|default:'' }}</textarea>
                {% if form.description.help_text %}
                  <div class="form-text">{{ form.description.help_text }}</div>
                {% endif %}
              </div>
              
              <div class="row mb-4">
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="{{ form.start_date.id_for_label }}" class="form-label">{{ form.start_date.label }}</label>
                    {% if form.start_date.errors %}
                      <div class="text-danger">{{ form.start_date.errors }}</div>
                    {% endif %}
                    <input type="datetime-local" 
                           name="{{ form.start_date.html_name }}" 
                           id="{{ form.start_date.id_for_label }}" 
                           class="form-control"
                           value="{{ form.start_date.value|default:'' }}">
                    {% if form.start_date.help_text %}
                      <div class="form-text">{{ form.start_date.help_text }}</div>
                    {% endif %}
                  </div>
                </div>
                
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="{{ form.end_date.id_for_label }}" class="form-label">{{ form.end_date.label }}</label>
                    {% if form.end_date.errors %}
                      <div class="text-danger">{{ form.end_date.errors }}</div>
                    {% endif %}
                    <input type="datetime-local" 
                           name="{{ form.end_date.html_name }}" 
                           id="{{ form.end_date.id_for_label }}" 
                           class="form-control"
                           value="{{ form.end_date.value|default:'' }}">
                    {% if form.end_date.help_text %}
                      <div class="form-text">{{ form.end_date.help_text }}</div>
                    {% endif %}
                  </div>
                </div>
              </div>
              
              <div class="row mb-4">

                
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="{{ form.location.id_for_label }}" class="form-label">{{ form.location.label }}</label>
                    {% if form.location.errors %}
                      <div class="text-danger">{{ form.location.errors }}</div>
                    {% endif %}
                    <input type="text" 
                           name="{{ form.location.html_name }}" 
                           id="{{ form.location.id_for_label }}" 
                           class="form-control"
                           value="{{ form.location.value|default:'' }}"
                           placeholder="Event location">
                    {% if form.location.help_text %}
                      <div class="form-text">{{ form.location.help_text }}</div>
                    {% endif %}
                  </div>
                </div>
              </div>
              
              <div class="row mb-4">
                <div class="col-md-6">
                  <div class="form-check form-switch mb-3">
                    <input type="checkbox" 
                           name="{{ form.is_public.html_name }}" 
                           id="{{ form.is_public.id_for_label }}" 
                           class="form-check-input"
                           {% if form.is_public.value %}checked{% endif %}>
                    <label class="form-check-label" for="{{ form.is_public.id_for_label }}">
                      {{ form.is_public.label }}
                    </label>
                    {% if form.is_public.errors %}
                      <div class="text-danger">{{ form.is_public.errors }}</div>
                    {% endif %}
                    {% if form.is_public.help_text %}
                      <div class="form-text">{{ form.is_public.help_text }}</div>
                    {% endif %}
                  </div>
                  
                  <div class="form-check form-switch mb-3">
                    <input type="checkbox" 
                           name="{{ form.require_registration.html_name }}" 
                           id="{{ form.require_registration.id_for_label }}" 
                           class="form-check-input"
                           {% if form.require_registration.value %}checked{% endif %}>
                    <label class="form-check-label" for="{{ form.require_registration.id_for_label }}">
                      {{ form.require_registration.label }}
                    </label>
                    {% if form.require_registration.errors %}
                      <div class="text-danger">{{ form.require_registration.errors }}</div>
                    {% endif %}
                    {% if form.require_registration.help_text %}
                      <div class="form-text">{{ form.require_registration.help_text }}</div>
                    {% endif %}
                  </div>
                </div>
              </div>
              
              <div class="row mb-4">
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="{{ form.logo.id_for_label }}" class="form-label">{{ form.logo.label }}</label>
                    {% if form.logo.errors %}
                      <div class="text-danger">{{ form.logo.errors }}</div>
                    {% endif %}
                    <input type="file" 
                           name="{{ form.logo.html_name }}" 
                           id="{{ form.logo.id_for_label }}" 
                           class="form-control">
                    {% if form.logo.help_text %}
                      <div class="form-text">{{ form.logo.help_text }}</div>
                    {% endif %}
                  </div>
                </div>
                
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="{{ form.cover_image.id_for_label }}" class="form-label">{{ form.cover_image.label }}</label>
                    {% if form.cover_image.errors %}
                      <div class="text-danger">{{ form.cover_image.errors }}</div>
                    {% endif %}
                    <input type="file" 
                           name="{{ form.cover_image.html_name }}" 
                           id="{{ form.cover_image.id_for_label }}" 
                           class="form-control">
                    {% if form.cover_image.help_text %}
                      <div class="form-text">{{ form.cover_image.help_text }}</div>
                    {% endif %}
                  </div>
                </div>
              </div>
              
              <div class="row">
                <div class="col-12 d-flex justify-content-end">
                  <a href="{% url 'events:event_list' %}" class="btn btn-outline-secondary me-3">Cancel</a>
                  <button type="submit" class="btn btn-primary">Create Event</button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

{% endblock content %}