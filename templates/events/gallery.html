{% extends "events/base.html" %}
{% block title %}Gallery - {{ event.title }}{% endblock %}

{% block content %}
<div class="space-y-6">
    <!-- Gallery Header -->
    <div class="bg-white rounded-lg shadow-md p-6">
        <h1 class="text-2xl font-bold">{{ event.title }} - Gallery</h1>
        {% if can_upload %}
        <div class="mt-4">
            <form method="post" enctype="multipart/form-data" class="flex items-center space-x-4">
                {% csrf_token %}
                <input type="file" name="photos" multiple accept="image/*" class="hidden" id="photo-upload">
                <label for="photo-upload" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 cursor-pointer">
                    Upload Photos
                </label>
            </form>
        </div>
        {% endif %}
    </div>

    <!-- Photo Grid -->
    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
        {% for photo in event.photos.all %}
        <div class="relative group">
            <img src="{{ photo.image.url }}" 
                 alt="Event photo" 
                 class="w-full h-48 object-cover rounded-lg">
            <div class="absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center space-x-4">
                <button class="text-white hover:text-blue-300">
                    <i class="fas fa-heart"></i>
                </button>
                {% if can_download %}
                <a href="{{ photo.image.url }}" download class="text-white hover:text-blue-300">
                    <i class="fas fa-download"></i>
                </a>
                {% endif %}
            </div>
        </div>
        {% empty %}
        <p class="text-gray-500 col-span-full text-center py-12">No photos uploaded yet.</p>
        {% endfor %}
    </div>
</div>
{% endblock %}